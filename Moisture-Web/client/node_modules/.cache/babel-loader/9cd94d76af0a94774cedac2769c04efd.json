{"ast":null,"code":"import _slicedToArray from\"/Users/ericg/Desktop/SNHS/Mosquito/Moisture-Web/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{ProgressBar}from'react-bootstrap';import{Line}from'react-chartjs-2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);var BreakComputer=function BreakComputer(chart){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),vBat=_useState2[0],setVBat=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dataSet=_useState4[0],setDataSet=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),bigArray=_useState6[0],setBigArray=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoaded=_useState8[0],setLoaded=_useState8[1];//duplicate testing for dev\nuseEffect(function(){console.log(chart);var initializeBigArray=function initializeBigArray(){var copy=bigArray;console.log(\"hey\");chart.data.map(function(x){console.log('hey Mike');x.entry.map(function(y){var exists=findIfIdExists(y.sensorId,copy);// console.log(exists);\n// console.log(y);\n// console.log(bigArray)\nif(exists==-1){copy.push([y]);console.log(copy);}else{console.log(\"hey:\");console.log(copy);// var valueArr = copy[exists].map((item)=> item.expirationSet );\n// if(!valueArr.some((item, idx)=> item == y.expirationSet )) \ncopy[exists].push(y);//delete duplicates because initializeBigArray is called twice\n}});});setBigArray(copy);};if(!isLoaded){initializeBigArray();createDataSets();setLoaded(true);}//createDataSets()\n},[chart]);//Rerenders when chart updates. Originally, vBat would remain unchanged since its state would never change. By passing the prop as an argument, the page renders with the asynchronous passing of chart (chart was passed through an async array)\nvar findIfIdExists=function findIfIdExists(y,copy){for(var i=0;i<copy.length;i++){console.log(y);var exists=copy[i].find(function(entries){return entries.sensorId==y;});if(exists!=undefined)return i;console.log(\"i didnt\");}return-1;};//essentially just map a dataset. \nvar createDataSets=function createDataSets(){setDataSet(bigArray.map(function(x,i){return{label:typeof x[0].sensorId==='undefined'?'No Sensor ID':x[0].sensorId,data:x.map(function(x){return x.soilMoisture;}),//might not need\nborderWidth:1,fill:false,borderColor:'red'};}));};var moistureData={labels:\"hip\",//fix for legend lengths\ndatasets:dataSet};var options={maintainAspectRatio:false,plugins:{title:{display:true,text:'Soil Moisture Data'}},scales:{},legend:{labels:{fontSize:25}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"moistureGraph\",children:/*#__PURE__*/_jsx(Line,{data:moistureData,height:400,options:options})})]});};export default BreakComputer;","map":{"version":3,"sources":["/Users/ericg/Desktop/SNHS/Mosquito/Moisture-Web/client/src/testFeatures/BreakComputer.js"],"names":["React","useState","useEffect","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","ProgressBar","Line","register","BreakComputer","chart","vBat","setVBat","dataSet","setDataSet","bigArray","setBigArray","isLoaded","setLoaded","console","log","initializeBigArray","copy","data","map","x","entry","y","exists","findIfIdExists","sensorId","push","createDataSets","i","length","find","entries","undefined","label","soilMoisture","borderWidth","fill","borderColor","moistureData","labels","datasets","options","maintainAspectRatio","plugins","title","display","text","scales","legend","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { ProgressBar } from 'react-bootstrap';\nimport { Line } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\n\nconst BreakComputer = (chart) => {\n    let [vBat, setVBat] = useState(0);\n    let [dataSet, setDataSet] = useState([]);\n    let [bigArray, setBigArray] = useState([]);\n    let [isLoaded, setLoaded] = useState(false); //duplicate testing for dev\n    useEffect(() => {\n      console.log(chart)\n      const initializeBigArray = () =>{\n        let copy = bigArray;\n        console.log(\"hey\")\n        chart.data.map(x => {\n            console.log('hey Mike')\n            x.entry.map(y=> {\n                \n                let exists = findIfIdExists(y.sensorId, copy);\n                // console.log(exists);\n                // console.log(y);\n                // console.log(bigArray)\n                if(exists == -1) {\n                    copy.push([y]);\n                    console.log(copy)\n                    \n                    \n                }\n                else {\n                    \n                    console.log(\"hey:\")\n                    console.log(copy)\n                    \n                    // var valueArr = copy[exists].map((item)=> item.expirationSet );\n                    // if(!valueArr.some((item, idx)=> item == y.expirationSet )) \n                    copy[exists].push(y); //delete duplicates because initializeBigArray is called twice\n                    \n                    \n                }\n        } ) \n        \n        \n    \n    \n      })\n      setBigArray(copy)\n    }\n            if(!isLoaded){\n              \n                initializeBigArray();\n                createDataSets();\n                setLoaded(true);\n            }\n            \n      //createDataSets()\n        \n    }, [chart]) //Rerenders when chart updates. Originally, vBat would remain unchanged since its state would never change. By passing the prop as an argument, the page renders with the asynchronous passing of chart (chart was passed through an async array)\n  \n  \n  \n\n  const findIfIdExists = (y, copy) => {\n    for(let i =0; i< copy.length; i++){\n        console.log(y)\n        let exists = copy[i].find(entries => entries.sensorId == y);\n        \n        \n        if(exists != undefined) return i;\n        console.log(\"i didnt\");\n\n        \n    }\n    \n    return -1;\n  }\n  \n  //essentially just map a dataset. \n\n  const createDataSets =() =>{\n    \n    \n        setDataSet(bigArray.map((x,i) =>({\n        label: (typeof x[0].sensorId === 'undefined') ? 'No Sensor ID' : x[0].sensorId,\n        data: x.map((x)=> x.soilMoisture) ,//might not need\n        borderWidth: 1,\n        fill: false,\n        borderColor: 'red'\n    })))\n    \n  }\n  \n  \n  \n  \n  \n    \n    var moistureData = {\n      labels: \"hip\", //fix for legend lengths\n      datasets: dataSet\n    };\n  \n    var options = {\n      maintainAspectRatio: false,\n      plugins : {\n        title: {\n          display: true,\n          text: 'Soil Moisture Data'\n      }\n      },\n      scales: {\n      },\n      legend: {\n        labels: {\n          fontSize: 25,\n        },\n      },\n    }\n    \n  \n    return (\n      <div>\n        <br />\n        <br />\n        <div className='moistureGraph'>\n          <Line\n            data={moistureData}\n            height={400}\n            options={options}\n          />\n  \n        </div></div>\n    )\n  }\n  \n  export default BreakComputer"]},"metadata":{},"sourceType":"module"}