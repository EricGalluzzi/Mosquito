{"ast":null,"code":"import _slicedToArray from\"/Users/ericg/Desktop/SNHS/Mosquito/Moisture-Web/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,BarController,BarElement}from'chart.js';import{ProgressBar}from'react-bootstrap';import{Line,Bar}from'react-chartjs-2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,BarController,BarElement);var BreakComputer=function BreakComputer(chart){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),vBat=_useState2[0],setVBat=_useState2[1];//format, array of object ID and vBat\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dataSet=_useState4[0],setDataSet=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),bigArray=_useState6[0],setBigArray=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),bigArrayLoaded=_useState8[0],setBigArrayLoaded=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoaded=_useState10[0],setLoaded=_useState10[1];//duplicate testing for dev\nuseEffect(function(){console.log(chart);if(chart.data.length>0){if(!isLoaded){initializeBigArray();createDataSets();setLoaded(true);vBatDisplay();}}//createDataSets()\n},[chart]);var initializeBigArray=function initializeBigArray(){var copy=bigArray;chart.data.map(function(x){x.entry.map(function(y){var exists=findIfIdExists(y.sensorId,copy);if(exists==-1){copy.push([y]);}else{console.log(\"hey:\");console.log(copy);// var valueArr = copy[exists].map((item)=> item.expirationSet );\n// if(!valueArr.some((item, idx)=> item == y.expirationSet )) \ncopy[exists].push(y);//delete duplicates because initializeBigArray is called twice\n}});});setBigArray(copy);setBigArrayLoaded(true);// if this causes a remound we need a way to stop duplicates. \n};var findIfIdExists=function findIfIdExists(y,copy){for(var i=0;i<copy.length;i++){console.log(y);var exists=copy[i].find(function(entries){return entries.sensorId==y;});if(exists!=undefined)return i;console.log(\"i didnt\");}return-1;};//essentially just map a dataset. \nvar createDataSets=function createDataSets(){setDataSet(bigArray.map(function(x,i){return{label:typeof x[0].sensorId==='undefined'?'No Sensor ID':x[0].sensorId,data:x.map(function(x){return x.soilMoisture;}),//might not need\nborderWidth:1,fill:false,borderColor:'red'};}));};var vBatDisplay=function vBatDisplay(){if(bigArrayLoaded){//why wont this work, not needed tbh,\nsetVBat(bigArray.map(function(x){return{\"sensorId\":typeof x[0].sensorId==='undefined'?'No Sensor ID':x[0].sensorId,\"vBat\":x[x.length-1].VBat//see if this value is anything\n};}));console.log(vBat);}};var moistureData={labels:\"hip\",//fix for legend lengths\ndatasets:dataSet};var options={maintainAspectRatio:false,plugins:{title:{display:true,text:'Soil Moisture Data'}},scales:{},legend:{labels:{fontSize:25}}};var displayVBat={labels:vBat.map(function(x){return x.sensorId;}),datasets:[{label:'Battery Voltage',backgroundColor:'rgba(75,192,192,1)',borderColor:'rgba(0,0,0,1)',borderWidth:2,data:vBat.map(function(x){return x.VBat;})}]};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"moistureGraph\",children:/*#__PURE__*/_jsx(Line,{data:moistureData,height:400,options:options})}),/*#__PURE__*/_jsx(\"div\",{className:\"voltageGraph\",children:/*#__PURE__*/_jsx(Bar,{data:displayVBat,height:400,options:options})})]});};export default BreakComputer;","map":{"version":3,"sources":["/Users/ericg/Desktop/SNHS/Mosquito/Moisture-Web/client/src/testFeatures/BreakComputer.js"],"names":["React","useState","useEffect","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","BarController","BarElement","ProgressBar","Line","Bar","register","BreakComputer","chart","vBat","setVBat","dataSet","setDataSet","bigArray","setBigArray","bigArrayLoaded","setBigArrayLoaded","isLoaded","setLoaded","console","log","data","length","initializeBigArray","createDataSets","vBatDisplay","copy","map","x","entry","y","exists","findIfIdExists","sensorId","push","i","find","entries","undefined","label","soilMoisture","borderWidth","fill","borderColor","VBat","moistureData","labels","datasets","options","maintainAspectRatio","plugins","title","display","text","scales","legend","fontSize","displayVBat","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  BarController,\n  BarElement,\n} from 'chart.js';\nimport { ProgressBar } from 'react-bootstrap';\nimport { Line, Bar } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  BarController,\n  BarElement\n);\n\n\nconst BreakComputer = (chart) => {\n  let [vBat, setVBat] = useState([]); //format, array of object ID and vBat\n  let [dataSet, setDataSet] = useState([]);\n  let [bigArray, setBigArray] = useState([]);\n  let [bigArrayLoaded, setBigArrayLoaded] = useState(false);\n  let [isLoaded, setLoaded] = useState(false); //duplicate testing for dev\n  \n  useEffect(() => {\n    console.log(chart)\n\n    if (chart.data.length > 0) {\n      if (!isLoaded) {\n\n        initializeBigArray();\n        createDataSets();\n        setLoaded(true);\n        vBatDisplay();\n      }\n    }\n\n    //createDataSets()\n\n  }, [chart])\n\n\n  const initializeBigArray = () => { \n    \n    let copy = bigArray;\n\n    chart.data.map(x => {\n\n      x.entry.map(y => {\n\n        let exists = findIfIdExists(y.sensorId, copy);\n        if (exists == -1) {\n          copy.push([y]);\n        }\n        else {\n\n          console.log(\"hey:\")\n          console.log(copy)\n\n          // var valueArr = copy[exists].map((item)=> item.expirationSet );\n          // if(!valueArr.some((item, idx)=> item == y.expirationSet )) \n          copy[exists].push(y); //delete duplicates because initializeBigArray is called twice\n\n\n        }\n      })\n\n\n\n\n    })\n    setBigArray(copy)\n    setBigArrayLoaded(true); // if this causes a remound we need a way to stop duplicates. \n  }\n\n  const findIfIdExists = (y, copy) => {\n    for (let i = 0; i < copy.length; i++) {\n      console.log(y)\n      let exists = copy[i].find(entries => entries.sensorId == y);\n\n\n      if (exists != undefined) return i;\n      console.log(\"i didnt\");\n\n\n    }\n\n    return -1;\n  }\n\n  //essentially just map a dataset. \n\n  const createDataSets = () => {\n\n\n    setDataSet(bigArray.map((x, i) => ({\n      label: (typeof x[0].sensorId === 'undefined') ? 'No Sensor ID' : x[0].sensorId,\n      data: x.map((x) => x.soilMoisture),//might not need\n      borderWidth: 1,\n      fill: false,\n      borderColor: 'red'\n    })))\n\n  }\n\n  const vBatDisplay = () => {\n    if (bigArrayLoaded) { //why wont this work, not needed tbh,\n      setVBat(bigArray.map(x => ({\n        \"sensorId\": (typeof x[0].sensorId === 'undefined') ? 'No Sensor ID' : x[0].sensorId,\n        \"vBat\": x[x.length - 1].VBat //see if this value is anything\n      })))\n      console.log(vBat);\n    }\n\n\n\n  }\n\n\n\n\n  var moistureData = {\n    labels: \"hip\", //fix for legend lengths\n    datasets: dataSet\n  };\n\n  var options = {\n    maintainAspectRatio: false,\n    plugins: {\n      title: {\n        display: true,\n        text: 'Soil Moisture Data'\n      }\n    },\n    scales: {\n    },\n    legend: {\n      labels: {\n        fontSize: 25,\n      },\n    },\n  }\n\nconst displayVBat = {\n  labels: vBat.map(x=> x.sensorId),\n  datasets: [\n    {\n      label: 'Battery Voltage',\n      backgroundColor: 'rgba(75,192,192,1)',\n      borderColor: 'rgba(0,0,0,1)',\n      borderWidth: 2,\n      data: vBat.map(x=> x.VBat)\n    }\n  ]\n}\n  return (\n    <div>\n      <br />\n      <br />\n      <div className='moistureGraph'>\n        <Line\n          data={moistureData}\n          height={400}\n          options={options}\n        />\n        </div>\n        <div className = 'voltageGraph'>\n        <Bar\n          data = {displayVBat}\n          height = {400}\n          options = {options}\n          />\n      </div>\n      </div>\n  )\n}\n\nexport default BreakComputer"]},"metadata":{},"sourceType":"module"}